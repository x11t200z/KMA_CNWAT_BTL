<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <style>
        /* label {
            display: block;
            margin-left: 10px;
        } */
        .lbipgroup {
            display: grid;
            grid-template-columns: 120px 300px 1fr;
            /* Cột 1: label cố định, Cột 2: input, Cột 3: thông báo lỗi*/
            margin-bottom: 10px;
            align-items: center;
        }

        .lbipgroup label {
            text-align: left;
        }

        .lbipgroup input,
        .lbipgroup select {
            padding: 5px;

        }

        input:focus {
            background-color: aqua;
        }

        .error {
            margin-left: 10px;
            color: red;
        }
    </style>
</head>

<body>
    <form id="formdangki" action="">
        <div class="lbipgroup">
            <label for="HoTen">Họ tên:</label>
            <input type="text" name="HoTen" id="HoTen" autofocus>
            <div class="error" id="errHoTen"></div>

        </div>
        <div class="lbipgroup">
            <label for="DiaChi">Địa chỉ:</label>
            <input type="text" name="DiaChi" id="DiaChi">
            <div class="error" id="errDiaChi"></div>
        </div>
        <div class="lbipgroup">
            <label for="GioiTinh1">Giới tính:</label>
            <div>
                <input type="radio" name="GioiTinh1" id="GioiTinh1" value="nam"> Nam
                <input type="radio" name="GioiTinh2" id="GioiTinh2" value="nu"> Nữ
            </div>
        </div>
        <div class="lbipgroup">
            <label for="NgaySinh">Ngày sinh:</label>
            <input type="text" name="NgaySinh" id="NgaySinh">
            <div class="error" id="errNgaySinh"></div>

        </div>
        <div class="lbipgroup">
            <label for="Email">Email:</label>
            <input type="text" name="Email" id="Email">
            <div class="error" id="errEmail"></div>

        </div>
        <div class="lbipgroup">
            <label for="SDT">Điện thoại:</label>
            <input type="text" name="SDT" id="SDT">
            <div class="error" id="errSDT"></div>
        </div>
        <div class="lbipgroup">
            <label>Khóa đăng ký:</label>
            <div>
                <input type="checkbox" name="KhoaDK1" id="KhoaDK1" value="tienganh"> Tiếng Anh
                <input type="checkbox" name="KhoaDK2" id="KhoaDK2" value="quantri"> Quản trị
                <input type="checkbox" name="KhoaDK3" id="KhoaDK3" value="cntt"> CNTT
            </div>
            <div class="error" id="errKhoaDK"></div>

        </div>
        <div class="lbipgroup">
            <label for="username">Tên sử dụng:</label>
            <input type="text" name="username" id="username">
            <div class="error" id="errusername"></div>
        </div>
        <div class="lbipgroup">
            <label for="password">Mật khẩu:</label>
            <input type="password" name="password" id="password">
            <div class="error" id="errpassword"></div>
        </div>
        <div class="lbipgroup">
            <label for="password2">Gõ lại mật khẩu:</label>
            <input type="password" name="password2" id="password2">
            <div class="error" id="errpassword2"></div>
        </div>
        <div class="lbipgroup">
        </div>
        <div class="lbipgroup">
            <label for="Note">Ghi chú</label>
            <input type="text" name="Note" id="Note">
            <div class="error" id="errNote"></div>
        </div>
        <div class="lbipgroup">
            <div>
            </div>
            <div>
                <button id="submitBtn">Chấp nhận</button>
                <button id="boquaBtn" onclick="boqua()">Bỏ qua</button>
            </div>

        </div>



    </form>
    <script>
        // Lấy tất cả các input trong form
        const inputs = document.querySelectorAll("#formdangki input");
        inputs.forEach((input, index) => {
            input.addEventListener("keydown", function (event) {
                if (event.key === "Enter") {
                    event.preventDefault(); // chặn form submit

                    // Tìm ô tiếp theo
                    const nextInput = inputs[index + 1];
                    if (nextInput) {
                        nextInput.focus(); // chuyển focus sang ô tiếp theo
                    }
                }
            });
        });
        // Chuẩn hóa họ tên
        document.getElementById("HoTen").addEventListener("blur", function () {
            let value = this.value.trim();                // bỏ khoảng trắng đầu/cuối
            value = value.replace(/\s+/g, " ");           // bỏ khoảng trắng thừa giữa các từ
            value = value.split(" ").map(word =>          // viết hoa chữ cái đầu
                word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()
            ).join(" ");
            this.value = value;
        });

        //CHuẩn hóa email
        document.getElementById("Email").addEventListener("blur", function () {
            let value = this.value.trim();
            let regex = /^[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)*@[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)*$/;

            let err = document.getElementById("errEmail");
            if (!regex.test(value)) {
                err.innerText = "Email không đúng định dạng";
            } else {
                err.innerText = "";
            }
        });
        // Chuẩn hóa ngày sinh
        document.getElementById("NgaySinh").addEventListener("input", function (e) {
            let value = this.value.replace(/\D/g, ""); // chỉ giữ số
            if (value.length >= 2 && value.length < 4) {
                value = value.slice(0, 2) + "/" + value.slice(2);
            } else if (value.length >= 4) {
                value = value.slice(0, 2) + "/" + value.slice(2, 4) + "/" + value.slice(4, 8);
            }
            this.value = value;
        });
        // Kiểm tra mật khẩu nhập lại
        document.getElementById("password2").addEventListener("blur", function () {
            let pass = document.getElementById("password").value;
            let repass = this.value;
            let err = document.getElementById("errpassword2");

            if (pass !== repass) {
                err.innerText = "Mật khẩu gõ lại không đúng";
            } else {
                err.innerText = "";
            }
        });
        document.getElementById("submitBtn").addEventListener("click", function (e) {
            e.preventDefault(); // chặn submit mặc định
            let isValid = true;

            let requiredFields = ["HoTen", "NgaySinh", "Email", "username", "password", "password2"];
            requiredFields.forEach(id => {
                let input = document.getElementById(id);
                let err = document.getElementById("err" + id);
                if (!input.value.trim()) {
                    err.innerText = "Thông tin bắt buộc";
                    isValid = false;
                } else {
                    err.innerText = "";
                }
            });

            if (isValid) {
                console.log("Im here")
                alert("Form hợp lệ, gửi thành công!");
                // document.getElementById("myForm").submit();
            }
        });
        function boqua(){
            document.getElementById("formdangki").reset();
        }

    </script>
</body>

</html>